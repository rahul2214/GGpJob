
# Database Structure (Firestore)

This document outlines the structure of the Firestore database for the Veltria Job Portal.

## Top-Level Collections

### 1. `users`

Stores profiles for users with the "Job Seeker" role. The document ID is the user's UID from Firebase Authentication.

-   **Fields**:
    -   `name`: `string` - Full name of the user.
    -   `email`: `string` - User's email address.
    -   `phone`: `string` - User's phone number.
    -   `role`: `string` - Always "Job Seeker".
    -   `headline`: `string` - A short professional headline.
    -   `locationId`: `string` - ID corresponding to a document in the `locations` collection.
    -   `domainId`: `string` - ID corresponding to a document in the `domains` collection.
    -   `resumeUrl`: `string` - URL to the user's resume file in Firebase Storage.
    -   `linkedinUrl`: `string` - URL to the user's LinkedIn profile.

-   **Sub-collections**:
    -   `education`: Stores educational history.
    -   `employment`: Stores work experience.
    -   `projects`: Stores personal or professional projects.
    -   `languages`: Stores languages known by the user.
    -   `skills`: Stores user's skills.
    -   `saved_jobs`: Stores jobs saved by the user.
        - Document ID is the `jobId`.
        - **Fields**:
            - `jobId`: `string` - ID of the job from the `jobs` collection.
            - `savedAt`: `timestamp` - When the job was saved.

### 2. `recruiters`

Stores profiles for users with "Recruiter", "Employee", "Admin", or "Super Admin" roles. The document ID is the user's UID from Firebase Authentication.

-   **Fields**: Same as the `users` collection, but `role` can be "Recruiter", "Employee", "Admin", or "Super Admin".

### 3. `jobs`

Stores all job postings, both direct and referral.

-   **Fields**:
    -   `title`: `string`
    -   `companyName`: `string`
    -   `locationId`: `string`
    -   `jobTypeId`: `string`
    -   `workplaceTypeId`: `string`
    -   `experienceLevelId`: `string`
    -   `domainId`: `string`
    -   `description`: `string`
    -   `salary`: `string` (optional)
    -   `vacancies`: `number`
    -   `role`: `string` - The specific role title (e.g., "Software Engineer").
    -   `postedAt`: `timestamp`
    -   `isReferral`: `boolean` - `true` if it's a referral job.
    -   `recruiterId`: `string` (UID of the recruiter who posted, if applicable)
    -   `employeeId`: `string` (UID of the employee who posted, if applicable)
    -   `contactEmail`: `string`
    -   `contactPhone`: `string`
    -   `employeeLinkedIn`: `string` (optional)
    -   `jobLink`: `string` (optional) - Link to the official job posting.

### 4. `applications`

Stores all job applications submitted by users.

-   **Fields**:
    -   `jobId`: `string` - ID of the job from the `jobs` collection.
    -   `userId`: `string` - UID of the "Job Seeker" who applied.
    -   `statusId`: `number` - Foreign key to `application_statuses`.
    -   `appliedAt`: `timestamp`
    -   `viewedAt`: `timestamp` (optional)

### 5. `domains`

Stores the job domains (e.g., "Software Engineering", "Marketing").

-   **Fields**:
    -   `id`: `string` - Auto-generated by Firestore.
    -   `name`: `string`

### 6. Lookup Collections

These collections store predefined options for various dropdowns in the application. They follow a simple structure.

-   `locations`:
    -   `id`: `number`
    -   `name`: `string`
    -   `country`: `string`
-   `job_types`:
    -   `id`: `number`
    -   `name`: `string`
-   `workplace_types`:
    -   `id`: `number`
    -   `name`: `string`
-   `experience_levels`:
    -   `id`: `number`
    -   `name`: `string`
-   `application_statuses`:
    -   `id`: `number`
    -   `name`: `string`

### 7. `portal_feedback`

Stores feedback submitted by users about the portal itself.

-   **Fields**:
    -   `userId`: `string` - UID of the user who submitted feedback.
    -   `rating`: `number` (1-5)
    -   `feedback`: `string` (optional)
    -   `submittedAt`: `timestamp`

## User Profile Sub-collections

These collections are nested under each document in the `users` collection.

-   **`education`**:
    -   `institution`: `string`
    -   `degree`: `string`
    -   `fieldOfStudy`: `string`
    -   `startDate`: `string`
    -   `endDate`: `string`
-   **`employment`**:
    -   `company`: `string`
    -   `title`: `string`
    -   `employmentType`: `string`
    -   `location`: `string`
    -   `startDate`: `string`
    -   `endDate`: `string`
    -   `description`: `string`
-   **`projects`**:
    -   `name`: `string`
    -   `description`: `string`
    -   `url`: `string`
-   **`languages`**:
    -   `language`: `string`
    -   `proficiency`: `string`
-   **`skills`**:
    -   `name`: `string`
